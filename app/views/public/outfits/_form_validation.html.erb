<script>
  // フォーム全体の要素
  var userForm = document.querySelector("#userForm");

  // 各入力フィールド(body) の要素
  var userBodyField = document.querySelector("#userBody");

  // 各入力フィールド内の<input>タグ
  var userBody = document.querySelector("#user_body");

  // フォーム送信ボタン（Submit）の要素
  var userSubmitBtn = document.querySelector("#user_submit");

  // 各フィールドのエラーメッセージ表示用の paragraph
  var bodyPara = document.createElement('p');

  // 各入力フィールドのバリデーションチェック用の変数
  // エラー時は"false", OK時は"true"を代入する（後述）
  var activeBody;

  //Submitボタンの有効化条件
  userSubmitBtn.disabled = true; // デフォルトでSubmitボタンを無効化
  userForm.addEventListener('input', ()=>{
    if(activeBody === true){
      userSubmitBtn.disabled = false;
    }else{
      userSubmitBtn.disabled = true;
    }
   });


  //一言コメントのバリデーション
  userBody.addEventListener("input", ()=>{
    if(userBody.value === ""){ // 入力フォームが空の場合
      bodyPara.textContent = "一言コメントを入力してください";
      bodyPara.style.color = "red";
      activeBody = false;
    }else if(userBody.value.length > 500){ // 文字数が500文字以上の場合
      bodyPara.textContent = "一言コメントは500文字以内で入力してください";
      bodyPara.style.color = "red";
      userSubmitActive -= 1;
      activeBody = false;
    }else{ // バリデーションチェック完了時（OK時）の処理
      bodyPara.textContent = "";
      activeBody = true;
    }
    userBodyField.appendChild(bodyPara); // :body用のバリデーションエラーメッセージを表示
  });



</script>